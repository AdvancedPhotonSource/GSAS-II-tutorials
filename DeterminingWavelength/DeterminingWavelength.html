<html><head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=f07rT8OfEooBJQZ-uS2Ruw');ol{margin:0;padding:0}table td,table th{padding:0}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c8{padding-top:18pt;padding-bottom:4pt;line-height:1.15;text-align:left}.c4{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c9{font-weight:700;font-size:24pt;font-family:"Times New Roman"}.c5{background-color:#ffffff}.c6{font-weight:700;font-size:18pt;font-family:"Times New Roman"}.c7{font-weight:400;font-size:11pt;font-family:"Arial"}.c0{font-size:12pt;font-family:"Calibri";font-weight:700}.c2{font-size:12pt;font-family:"Times New Roman";font-weight:400}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head>

<body class="c5"><div><p class="c1"><span class="c4 c7"></span></p></div><p class="c3">
<span class="c4 c9">
Area Detector Calibration with Multiple Distances, part 1: Determine Wavelength
</span></p><p class="c3"><span class="c2">
</span></p><p class="c1"></p><p class="c3"><span class="c4 c2">

<BL>
  <LI><B>A video version of this tutorial is available at 
<A href="https://anl.box.com/v/DeterminingWavelength" target="_blank">https://anl.box.com/v/DeterminingWavelength</A></B>
 <LI>Exercise files are found <A href="./data/" target="_blank">here</a>
</BL></P><P></P>

</span></p><p class="c1"></p><p class="c3"><span class="c4 c2"> 

In this tutorial you will use a standard with a known lattice parameter (silicon) to determine the wavelength of the X-ray beam without precise knowledge of the sample-to-detector distance. This is done 
for APS beamline 17-BM-B by collecting diffraction data with multiple detector distances, where the
relative placement of the detectors is known to some degree. Here 23 images with approximate placements ranging from 200 to 1300 mm from the sample. First the x-ray wavelength is determined and then in a subsequent
tutorial that wavelength is used to calibrate the actual detector placements.
</span></p><p class="c1"></p><p class="c3"><span class="c4 c2"> 
Note that menu entries are listed in bold face below as </span><span class="c0">Help/About GSAS-II</span><span class="c2">, which lists first the name of the menu (here </span><span class="c0">Help</span><span class="c2">) and second the name of the entry in the menu (here </span><span class="c0">About GSAS-II</span><span class="c4 c2">). Bold text is also used to highlight actions, such as
clicking on a control in the GSAS-II graphical interface. 
</span></p><p class="c3"><span class="c4 c2">
</span></p><p class="c1"></p><p class="c3"><span class="c4 c2">
If you have not done so already, start GSAS-II or start a new project.</span></p>
<h2 class="c3" id="h.e0ybb39ui38f"><span class="c4 c6">Step 1: Load data</span></h2><p class="c3"><span class="c2">First do </span><span class="c0">Import/Image/from TIF image file, </span><span class="c2">&nbsp;select all images; then press </span><span class="c0">Open</span><span class="c4 c2">&nbsp;to read all of them. The GSAS-II data tree window will show entries for 23 images and will expand the last one.</span>
If the files have not been downloaded with this tutorial, they can be
found here: <A href="https://subversion.xray.aps.anl.gov/pyGSAS/Tutorials/DeterminingWavelength/data/">
https://subversion.xray.aps.anl.gov/pyGSAS/Tutorials/DeterminingWavelength/data/
</A>.</p>
<p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 614.38px; height: 396.50px;"><img alt="" src="images/image9.png" style="width: 1050.34px; height: 592.22px; margin-left: -385.46px; margin-top: -74.24px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
<h2 class="c3" id="h.e0ybb39ui38f"><span class="c4 c6">Step 2: Calibrating the Wavelength: First Image</span></h2>
<p class="c3"><span class="c2">First select the </span><span class="c0">IMG Si_free_dc200_1-00000.tif</span><span class="c2">&nbsp;entry from the tree (the first in the tree) and expand it (press the </span><span class="c0">+</span><span class="c2">&nbsp;box); then select </span><span class="c0">Image controls</span><span class="c2">. The data window (</span><span class="c0">Image Controls</span><span class="c4 c2">) will show the default settings.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 435.00px;"><img alt="" src="images/image10.png" style="width: 858.00px; height: 481.66px; margin-left: -183.12px; margin-top: -6.86px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Select the </span><span class="c0">Calibrant</span><span class="c2">&nbsp;(near bottom of window) as </span><span class="c0">Si SRM640c.</span><span class="c2">&nbsp;</span><span class="c0">Check</span><span class="c2">&nbsp;the box next to </span><span class="c0">Wavelength </span><span class="c2">and </span><span class="c0">uncheck</span><span class="c2">&nbsp;the box next to </span><span class="c0">Distance</span><span class="c2">. We are doing this because we will initially treat the reported
setting distance to be correct, and will use that to determine the unknown wavelength. You should move the </span><span class="c0">Max intensity</span><span class="c2">&nbsp;slider to near the middle of the range (we chose 150,000) &ndash; that will improve the image. Change </span><span class="c0">Min calib d-spacing</span><span class="c2">&nbsp;to </span><span class="c0">0.5</span><span class="c2">, </span><span class="c0">Min ring l/lb</span><span class="c2">&nbsp;to </span><span class="c0">5.0</span><span class="c2">, </span><span class="c0">Calib lines to skip</span><span class="c2">&nbsp;to </span><span class="c0">0</span><span class="c2">, and </span><span class="c0">Pixel search range</span><span class="c2">&nbsp;to </span><span class="c0">2</span><span class="c2">. When done the </span><span class="c0">Image controls</span><span class="c2">&nbsp;window should look lik</span><span class="c2">e:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 619.00px; height: 387.00px;"><img alt="" src="images/image11.png" style="width: 780.94px; height: 439.32px; margin-left: -110.63px; margin-top: -12.52px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Next select </span><span class="c0">Calibration/Calibrate</span><span class="c2">&nbsp;from the </span><span class="c0">Image Controls</span><span class="c2">&nbsp;menu; a bit of instruction will appear on the status line of this window. </span><span class="c0">Zoom</span><span class="c2">&nbsp;in so that the innermost rings are clear. </span><span class="c0">Select 5 points</span><span class="c4 c2">&nbsp;on the innermost ring (arrowed above); a small red cross will appear at each selection point (may have to reload page for crosses to show up).</span></p><p class="c1"><span class="c4 c2"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 487.50px; height: 438.75px;"><img alt="" src="images/image13.png" style="width: 861.49px; height: 482.53px; margin-left: -225.20px; margin-top: -11.98px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Press the right mouse button to finish; calibration will proceed. </span><span class="c2">A sequence of concentric red </span><span class="c2">rings will appear; they will switch to blue when calibration is finished. Select </span><span class="c0">Show ring picks</span><span class="c2">&nbsp;(near bottom right of </span><span class="c0">Image Controls</span><span class="c2">&nbsp;window). The </span><span class="c0">Image Controls</span><span class="c4 c2">&nbsp;window will show the results of the calibration</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 616.50px; height: 381.74px;"><img alt="" src="images/image24.png" style="width: 772.48px; height: 433.63px; margin-left: -107.70px; margin-top: -11.12px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4 c2">And the plot will show the rings used in the calibration calculations.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 486.50px; height: 453.24px;"><img alt="" src="images/image19.png" style="width: 919.93px; height: 516.51px; margin-left: -232.93px; margin-top: -16.19px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">We can improve the fit by refining a penetration correction; select the </span><span class="c0">Penetration</span><span class="c2">&nbsp; and then we can recalibrate. Select </span><span class="c0">Calibration/Recalibrate</span><span class="c4 c2">. Keep recalibrating until the penetration value converges to a constant value. The value that our Penetration converged to 0.1433. Zoom into a quadrant of the rings and check to make sure the blue calibration lines are towards the middle of the rings in the collected data</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 495.50px; height: 460.55px;"><img alt="" src="images/image27.png" style="width: 939.79px; height: 526.55px; margin-left: -237.96px; margin-top: -18.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p>
<h2 class="c3" id="h.e0ybb39ui38f"><span class="c4 c6">Step 3: Calibrating all Images</span></h2>
<p class="c3"><span class="c4 c2">Since the single-image calibration looks good, it is time to copy these parameters onto the rest of the images.</span></p><p class="c3"><span class="c2">Next select </span><span class="c0">Parms/Copy Selected</span><span class="c4 c2">. A text box like this will pop up:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 446.50px; height: 299.36px;"><img alt="" src="images/image7.png" style="width: 936.47px; height: 523.88px; margin-left: -321.16px; margin-top: -99.15px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Click </span><span class="c0">Set All</span><span class="c2">&nbsp;on the bottom then go back and unselect both </span><span class="c0">distance (#11)</span><span class="c2">&nbsp;and</span><span class="c0">&nbsp;setdist</span><span class="c2">&nbsp;</span><span class="c0">(#26)</span><span class="c2">, as below, then press</span><span class="c0">&nbsp;OK</span><span class="c4 c2">. We want to copy all parameters except for the distances because they differ for each image. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 465.50px; height: 414.40px;"><img alt="" src="images/image16.png" style="width: 902.09px; height: 506.81px; margin-left: -284.79px; margin-top: -30.32px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Another dialog box will appear for selection of the images to copy these parameters to, hit </span><span class="c0">Set All</span><span class="c2">&nbsp;and press </span><span class="c4 c0">OK</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 246.75px; height: 321.50px;"><img alt="" src="images/image23.png" style="width: 1015.29px; height: 565.44px; margin-left: -466.62px; margin-top: -106.06px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Next select </span><span class="c0">C</span><span class="c0">alibration/Recalibrate all </span><span class="c2">to recalibrate all images with the new parameters.
</span></p><p class="c8"><span class="c4 c2">
Do </span><span class="c0">File/Save project as...</span><span class="c2">&nbsp;and name it </span><span class="c0">Wavelength_Determination</span><span class="c4 c2">. This will create a copy of the project to use for calibration.</span></p><p class="c1"><span class="c4 c2"></span></p><p class="c1"><span class="c4 c2"></span></p><p class="c3"><span class="c2">The next step is to check to make sure the Min calib d-spacing setting value ensures that only full rings are used in each calibration. The </span><span class="c2">Min calib d-spacing restrict the set of reflections to be used. </span><span class="c2">To do this, start at the </span><span class="c0">Image Controls</span><span class="c2">&nbsp;for the first image and then go in increasing order through the images until you find one where the outer rings are cut off. For us, the first image with rings cut off is </span><span class="c0">IMG Si_free_dc400_1</span><span class="c0">-00000.tif</span><span class="c4 c2">, as below.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 582.00px; height: 543.00px;"><img alt="" src="images/image21.png" style="width: 1104.29px; height: 620.82px; margin-left: -279.84px; margin-top: -21.22px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c4 c2"></span></p><p class="c3"><span class="c4 c2">Start with your cursor in the center of the rings and then pan your mouse over to the right edge. Watch the Min calib d-spacing decrease as you continue to move the mouse to the right.</span></p><p class="c1"><span class="c4 c2"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 488.00px;"><img alt="" src="images/image18.gif" style="width: 624.00px; height: 488.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Look at the dsp value at the bottom of the plot window. Look at the value when the cursor is on the edge. That will be the new Min calib d-spacing. The default value of 0.50 is allowing the outer rings to be cut off.</span><span class="c2">&nbsp;</span><span class="c2">&nbsp;We then looked at what the dsp value was when the cursor was on the edge of the image. Here it is 0.529, so we went to image controls &nbsp;for image </span><span class="c0">IMG Si_free_dc400_1</span><span class="c0">-00000.tif</span><span class="c2">&nbsp;</span><span class="c2">a</span><span class="c2">nd changed </span><span class="c0">Min calib d-spacing</span><span class="c4 c2">&nbsp;to 0.53.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 637.00px; height: 394.00px;"><img alt="" src="images/image5.png" style="width: 799.07px; height: 449.01px; margin-left: -109.57px; margin-top: -14.07px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Then select </span><span class="c0">Calibration/Recalibrate</span><span class="c4 c2">&nbsp;and the image should now have all the rings intact. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 561.00px; height: 527.00px;"><img alt="" src="images/image14.png" style="width: 1070.53px; height: 602.04px; margin-left: -271.06px; margin-top: -20.58px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">After you fix the first image where the Min calib d-spacing is off you can fix the rest of the images that also have this problem. To fix this, select image controls for image </span><span class="c0">IMG Si_free_dc400_1</span><span class="c0">-00000.tif</span><span class="c2">. </span><span class="c2">Then select </span><span class="c0">Parms/XFer Angles </span><span class="c4 c2">and a window will pop up.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 252.50px; height: 441.38px;"><img alt="" src="images/image20.png" style="width: 1240.63px; height: 697.85px; margin-left: -536.81px; margin-top: -107.36px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Select </span><span class="c0">Set All </span><span class="c2">but then </span><span class="c0">unselect</span><span class="c2">&nbsp;all the earlier images that did not have a Min calib d-spacing problem. For us, this was </span><span class="c0">images 200-350</span><span class="c2">. Then </span><span class="c0">select</span><span class="c2">&nbsp;the </span><span class="c0">Xfer scaled calib d-min </span><span class="c2">option on the bottom of the window and </span><span class="c0">unselect</span><span class="c2">&nbsp;the </span><span class="c0">Xfer scaled 2-theta max </span><span class="c4 c2">option. This takes min calibrated d-spacing from the image selected and determines the accurate d-spacing for all other images. The text box should look like the following:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 262.00px; height: 454.00px;"><img alt="" src="images/image22.png" style="width: 1277.25px; height: 717.60px; margin-left: -552.66px; margin-top: -108.36px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Then select</span><span class="c0">&nbsp;OK</span><span class="c4 c2">&nbsp;and the rest of the Min calib d-spacing will be adjusted for the rest of the images.</span></p><p class="c3"><span class="c2">Now it&rsquo;s time to recalibrate all of the images with the new Min calib d-spacing values. Go to any image controls window and select </span><span class="c0">Calibration/Recalibrate all </span><span class="c2">and select </span><span class="c4 c0">Set All. </span></p><p class="c3"><span class="c4 c2">This will take a bit of time as each image is being recalibrated. </span></p><p class="c3"><span class="c2">After the recalibration, all the images should only have full intact rings. Once the process is complete go to the bottom of the data tree and select </span><span class="c0">Sequential image calibration results </span><span class="c4 c2">and a table should appear. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 605.50px; height: 376.16px;"><img alt="" src="images/image17.png" style="width: 757.18px; height: 425.91px; margin-left: -103.14px; margin-top: -12.13px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">In </span><span class="c0">Sequential Image Calibration results</span><span class="c2">, a table should appear with a column labeled dep containing detector penetration depths (</span><span class="c0">dep</span><span class="c2">). As we look over the table we need to make sure that the detector penetration depths have roughly the same values except for the first few rows (these will be off due to the close distances). As we look at our data we notice that the last few values are inconsistent with the rest. To investigate we select the </span><span class="c0">IMG Si_free_dc1250_1</span><span class="c0">-00000.tif</span><span class="c0">/ Image Controls</span><span class="c2">&nbsp;and view the second to last image.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 537.50px; height: 503.19px;"><img alt="" src="images/image15.png" style="width: 1019.45px; height: 573.44px; margin-left: -258.13px; margin-top: -17.97px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4 c2">We can see from the image that there is a fake (or fragmented) fourth ring that should not actually be there (the last &ldquo;1300&rdquo; image does not have this issue of the fake fourth ring). In order to fix this we will pan the mouse over to the space in between the last full ring and the fake ring as shown below.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 577.33px;"><img alt="" src="images/image26.gif" style="width: 624.00px; height: 577.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">We found a value of the dsp to be 1.592 and changed the Min calib d-spacing to that value under </span><span class="c0">Image controls </span><span class="c4 c2">for the &ldquo;1250&rdquo; image. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 620.00px; height: 383.00px;"><img alt="" src="images/image2.png" style="width: 776.56px; height: 436.77px; margin-left: -106.78px; margin-top: -12.44px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">We then selected </span><span class="c0">Calibration/Recalibrate</span><span class="c4 c2">&nbsp;and our image now excludes the fake fourth ring.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 497.50px; height: 464.33px;"><img alt="" src="images/image3.png" style="width: 940.73px; height: 529.16px; margin-left: -236.69px; margin-top: -16.58px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Continue to go through the i</span><span class="c2">mages in decreasing distance from</span><span class="c2">&nbsp;the detector and check to see whether there is a phantom ring and adjust the Min calib d-spacing accordingly. However once you get to an image where there is another full ring outside of the phantom ring, there is no need to adjust the Min calib d-spacing. We adjusted the Min calib d-spacing value to </span><span class="c0">1.59</span><span class="c2">&nbsp;for images </span><span class="c0">IMG Si_free_dc1200_1</span><span class="c0">-00000.tif</span><span class="c0">&nbsp;</span><span class="c2">and </span><span class="c0">IMG Si_free_dc1150_1</span><span class="c0">-00000.tif</span><span class="c4 c2">. The &ldquo;1100&rdquo; image had a fifth full ring that we did not want to exclude.</span></p><p class="c1"><span class="c4 c2"></span></p><p class="c3"><span class="c2">After completing this process select </span><span class="c0">Calibration/Recalibrate all </span><span class="c2">once again. Continue calibrating until the dep values</span><span class="c2">&nbsp;</span><span class="c2">converge. After a few recalibrations, the table under </span><span class="c0">Sequential image calibration results</span><span class="c2 c4">&nbsp;shows our dep values converge the detector distances are further from the sample.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 636.00px; height: 395.00px;"><img alt="" src="images/image25.png" style="width: 796.57px; height: 447.24px; margin-left: -109.51px; margin-top: -12.74px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Our new values have improved quite a bit. If the any </span><span class="c2">&nbsp;detector penetration depth (dep) </span><span class="c2">values are negative then go to </span><span class="c0">Image Controls </span><span class="c2">for the images with negative dep values. You will see that the penetration values for those images are also negative. As this should not be possible, change the value of </span><span class="c0">Penetration </span><span class="c2">to </span><span class="c0">zero</span><span class="c2">&nbsp;and then did </span><span class="c0">Calibration/Recalibrate all </span><span class="c2">once again and the penetration values should become positive.
If required, turn off refinement of Penetration with a value of 0.0 if that is the only way to keep
the value from becoming negative. </span></p>
<p class="c1"><span class="c4 c2"></span></p>

<p class="c3"><span class="c4 c6">Step 4: Parametric Fit to Find Wavelength</span></p>
<p class="c1"><span class="c4 c2"></span></p>
<p class="c3"><span class="c2">The refinement is giving good calibration values so it&rsquo;s now time to graph our values. Under the </span><span class="c0">Sequential image calibration results</span><span class="c2">&nbsp;tab in the data tree select </span><span class="c0">Parametric Fit/Add equation</span><span class="c2">&nbsp;and a new window should popup.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 498.50px; height: 273.15px;"><img alt="" src="images/image4.png" style="width: 1065.29px; height: 599.22px; margin-left: -406.31px; margin-top: -151.94px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">From the blank drop down bar select </span><span class="c0">Global</span><span class="c4 c2">. A popup window will appear. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 489.50px; height: 219.94px;"><img alt="" src="images/image12.png" style="width: 1031.92px; height: 580.45px; margin-left: -391.93px; margin-top: -183.56px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Select </span><span class="c0">wave Global wave. </span><span class="c2">&nbsp;Then type in the equation: </span><span class="c0">m/x + b</span><span class="c2">&nbsp;and press</span><span class="c0">&nbsp;Validate.</span><span class="c4 c2">&nbsp;The window will change and will allow you to enter variable types.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 519.00px; height: 284.00px;"><img alt="" src="images/image6.png" style="width: 1104.65px; height: 621.34px; margin-left: -421.01px; margin-top: -157.55px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">For both b and m variable type select </span><span class="c0">Free</span><span class="c2">. Then for x select </span><span class="c0">Global</span><span class="c2">.</span></p><p class="c3"><span class="c4 c2">Another popup window will appear.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 439.00px; height: 196.00px;"><img alt="" src="images/image12.png" style="width: 931.78px; height: 522.60px; margin-left: -355.39px; margin-top: -165.27px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">&nbsp;Select </span><span class="c0">setdist Global setdist</span><span class="c2">. Then press </span><span class="c0">Fit</span><span class="c4 c2">&nbsp;and observe the graph.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 481.50px; height: 449.30px;"><img alt="" src="images/image29.png" style="width: 913.24px; height: 513.70px; margin-left: -43.91px; margin-top: -23.42px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">
Note that the wavelength values vary significantly with dataset number (detector distance). This is a
result of the detector distance being inaccurate. The fitting equation of "wave = m/dist + b" provides a first-order correction if the detectors are all offset by a particular amount. 
The fit looks reasonable, however, the images with detector placements that are very close are not as reliable since the offset has the largest impact and the ones very far away have very few rings and likewise should not be used. To make this change, we need to select </span><span class="c0">OK</span><span class="c2">&nbsp;so we are back to the table under Sequential image calibration results and deselect images so we only have a range from </span><span class="c2">IMG Si_free_dc450_1</span><span class="c2">-00000.tif</span><span class="c2">&nbsp;to </span><span class="c2">IMG Si_free_dc1000_1</span><span class="c2">-00000.tif</span><span class="c4 c2">. The table should look like this:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 637.00px; height: 395.00px;"><img alt="" src="images/image8.png" style="width: 798.72px; height: 449.83px; margin-left: -110.52px; margin-top: -14.10px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">Then select </span><span class="c0">Parametric Fit/Edit Equation</span><span class="c2">&nbsp;and then after the popup appears press </span><span class="c0">Fit</span><span class="c4 c2">&nbsp;again. The new graph should show a much better fit.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 564.50px; height: 529.97px;"><img alt="" src="images/image1.png" style="width: 1077.21px; height: 605.93px; margin-left: -303.83px; margin-top: -32.80px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c4 c2">If you then go to the command prompt window, we know the variable b is the wavelength.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 310.00px; height: 141.00px;"><img alt="" src="images/image28.png" style="width: 1639.32px; height: 925.36px; margin-left: -273.22px; margin-top: -626.18px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">&nbsp;So from this, we know that the average wavelength is 0.241689. Continue on to the next tutorial to learn how to use this calibration result to finish calibrating the distances.</span></p><p class="c1"><span class="c4 c2"></span></p></body></html>